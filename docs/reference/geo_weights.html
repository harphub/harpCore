<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="For repeated transformations from the same grid definition, it may be more
efficient to compute the interpolation weights first and then compute the
transformations with those weights. These functions are used to compute the
interpolation weights, which can then be passed to the geo_transform
function via the opts argument, or to an explicit geo_&amp;lt;transformation&amp;gt;
function via the weights argument"><title>Compute interpolation weights for geographic transformations — geo_weights • harpCore</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute interpolation weights for geographic transformations — geo_weights"><meta property="og:description" content="For repeated transformations from the same grid definition, it may be more
efficient to compute the interpolation weights first and then compute the
transformations with those weights. These functions are used to compute the
interpolation weights, which can then be passed to the geo_transform
function via the opts argument, or to an explicit geo_&amp;lt;transformation&amp;gt;
function via the weights argument"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">harpCore</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/harphub/harpCore/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Compute interpolation weights for geographic transformations</h1>
      <small class="dont-index">Source: <a href="https://github.com/harphub/harpCore/blob/HEAD/R/geo_weights.R" class="external-link"><code>R/geo_weights.R</code></a></small>
      <div class="d-none name"><code>geo_weights.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>For repeated transformations from the same grid definition, it may be more
efficient to compute the interpolation weights first and then compute the
transformations with those weights. These functions are used to compute the
interpolation weights, which can then be passed to the <code>geo_transform</code>
function via the <code>opts</code> argument, or to an explicit <code>geo_&lt;transformation&gt;</code>
function via the <code>weights argument</code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">geo_weights</span><span class="op">(</span><span class="va">x</span>, trans <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"points"</span>, <span class="st">"regrid"</span>, <span class="st">"xsection"</span><span class="op">)</span>, <span class="va">opts</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">geo_weights_points</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">points</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bilinear"</span>, <span class="st">"nearest"</span>, <span class="st">"bicubic"</span><span class="op">)</span>,</span>
<span>  mask <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">geo_weights_regrid</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">new_grid</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bilinear"</span>, <span class="st">"nearest"</span>, <span class="st">"bicubic"</span><span class="op">)</span>,</span>
<span>  mask <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  new_mask <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">geo_weights_xsection</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">p1</span>,</span>
<span>  <span class="va">p2</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bilinear"</span>, <span class="st">"nearest"</span>, <span class="st">"bicubic"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>A geofield, geolist, or a data frame with class <code>harp_grid_df</code>. For
transformations that do not involve the interpolation of gridded data (e.g.
zoom, subgrid) <code>x</code> can also be a geodomain.</p></dd>


<dt>trans</dt>
<dd><p>The transformation to apply. Can be "points", "regrid",
"xsection", "subgrid", or "zoom".</p></dd>


<dt>opts</dt>
<dd><p>A list of options for the chosen transformation. The appropriate
<a href="geo_opts.html">geo_opts</a> function should be used to generate this list.</p></dd>


<dt>points</dt>
<dd><p>A data frame of geographic points to which to interpolate the
gridded data. The data frame must include the columns "SID" for a unique id
for the point, "lon" for the longitude of the point in decimal degrees and
"lat" for the latitude of the point in decimal degrees. The data frame can
contain other columns, which will be retained in the output.</p></dd>


<dt>method</dt>
<dd><p>The interpolation method. Can be "nearest" for nearest
neighbour, "bilinear", or "bicubic." The default is "bilinear". For
<code>geo_upscale</code>, can be any function that summarises a vector to a
single value and can found with <code><a href="https://rdrr.io/r/base/match.fun.html" class="external-link">match.fun</a></code>, the default
being "mean". A further option is "downsample", dwhich is described in the
argument for <code>downsample_location</code>.</p></dd>


<dt>mask</dt>
<dd><p>A mask to prevent grid points being used in the interpolation.
Should be on the same grid as <code>x</code> and grid points with values of 0 or FALSE
will be masked from the interpolation.</p></dd>


<dt>force</dt>
<dd><p>For interpolations that include a mask, it is possible that a
point will be surrounded by 4 masked points. In this case the mask will be
ignored and all 4 points used in the interpolation (the default). Set
<code>force = TRUE</code> to force the mask to be applied and set the interpolated to
<code>NA</code>.</p></dd>


<dt>new_grid</dt>
<dd><p>A <code>geofield</code> or <code>geodomain</code> on the grid that <code>x</code> should be
regridded to. <a href="define_domain.html">define_domain</a> can be used to define a new <code>geodomain</code>.</p></dd>


<dt>new_mask</dt>
<dd><p>A <code>geofield</code> on the same grid as <code>new_grid</code> with grid points
that should not be interpolated to set to 0 or FALSE.</p></dd>


<dt>p1</dt>
<dd><p>The geographic location in decimal degrees of the start of the
section. Should be a vector of length 2 with the first value being the
longitude and the second value the latitude.</p></dd>


<dt>p2</dt>
<dd><p>The geographic location in decimal degrees of the end of the
section. Should be a vector of length 2 with the first value being the
longitude and the second value the latitude.</p></dd>


<dt>n</dt>
<dd><p>The number of equally spaced points along the section. The default
is 100.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The interpolation weights for the geographic transformation.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Andrew Singleton.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

