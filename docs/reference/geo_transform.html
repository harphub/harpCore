<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Gridded data can be transformed from one grid definition to another, to
geographic points, to cross sections, to sub-domains of the original grid, or
zoomed into the original a grid. The geo_&amp;lt;transformation&amp;gt; functions are
used to achieve this, while the generalized function geo_transform is
designed to be used in functions that will take the transformation as an
argument."><title>Geographic transformation of gridded data — geo_points • harpCore</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Geographic transformation of gridded data — geo_points"><meta property="og:description" content="Gridded data can be transformed from one grid definition to another, to
geographic points, to cross sections, to sub-domains of the original grid, or
zoomed into the original a grid. The geo_&amp;lt;transformation&amp;gt; functions are
used to achieve this, while the generalized function geo_transform is
designed to be used in functions that will take the transformation as an
argument."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">harpCore</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/harphub/harpCore/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Geographic transformation of gridded data</h1>
      <small class="dont-index">Source: <a href="https://github.com/harphub/harpCore/blob/HEAD/R/geo_transform.R" class="external-link"><code>R/geo_transform.R</code></a></small>
      <div class="d-none name"><code>geo_transform.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Gridded data can be transformed from one grid definition to another, to
geographic points, to cross sections, to sub-domains of the original grid, or
zoomed into the original a grid. The <code>geo_&lt;transformation&gt;</code> functions are
used to achieve this, while the generalized function <code>geo_transform</code> is
designed to be used in functions that will take the transformation as an
argument.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">geo_points</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">points</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bilinear"</span>, <span class="st">"nearest"</span>, <span class="st">"bicubic"</span><span class="op">)</span>,</span>
<span>  mask <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  keep_weights <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">geo_regrid</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">new_grid</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bilinear"</span>, <span class="st">"nearest"</span>, <span class="st">"bicubic"</span><span class="op">)</span>,</span>
<span>  mask <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  new_mask <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  keep_weights <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">geo_subgrid</span><span class="op">(</span><span class="va">x</span>, <span class="va">i1</span>, <span class="va">i2</span>, <span class="va">j1</span>, <span class="va">j2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">geo_zoom</span><span class="op">(</span><span class="va">x</span>, <span class="va">centre_lon</span>, <span class="va">centre_lat</span>, <span class="va">length_x</span>, <span class="va">length_y</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">geo_xsection</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">p1</span>,</span>
<span>  <span class="va">p2</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bilinear"</span>, <span class="st">"nearest"</span>, <span class="st">"bicubic"</span><span class="op">)</span>,</span>
<span>  weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  keep_weights <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">geo_upscale</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">factor</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  downsample_location <span class="op">=</span> <span class="st">"bottom_left"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">geo_transform</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  trans <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"points"</span>, <span class="st">"regrid"</span>, <span class="st">"subgrid"</span>, <span class="st">"zoom"</span>, <span class="st">"xsection"</span><span class="op">)</span>,</span>
<span>  <span class="va">opts</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>A geofield, geolist, or a data frame with class <code>harp_grid_df</code>. For
transformations that do not involve the interpolation of gridded data (e.g.
zoom, subgrid) <code>x</code> can also be a geodomain.</p></dd>


<dt>points</dt>
<dd><p>A data frame of geographic points to which to interpolate the
gridded data. The data frame must include the columns "SID" for a unique id
for the point, "lon" for the longitude of the point in decimal degrees and
"lat" for the latitude of the point in decimal degrees. The data frame can
contain other columns, which will be retained in the output.</p></dd>


<dt>method</dt>
<dd><p>The interpolation method. Can be "nearest" for nearest
neighbour, "bilinear", or "bicubic." The default is "bilinear". For
<code>geo_upscale</code>, can be any function that summarises a vector to a
single value and can found with <code><a href="https://rdrr.io/r/base/match.fun.html" class="external-link">match.fun</a></code>, the default
being "mean". A further option is "downsample", dwhich is described in the
argument for <code>downsample_location</code>.</p></dd>


<dt>mask</dt>
<dd><p>A mask to prevent grid points being used in the interpolation.
Should be on the same grid as <code>x</code> and grid points with values of 0 or FALSE
will be masked from the interpolation.</p></dd>


<dt>force</dt>
<dd><p>For interpolations that include a mask, it is possible that a
point will be surrounded by 4 masked points. In this case the mask will be
ignored and all 4 points used in the interpolation (the default). Set
<code>force = TRUE</code> to force the mask to be applied and set the interpolated to
<code>NA</code>.</p></dd>


<dt>weights</dt>
<dd><p>Pre-computed weights for the interpolation. Should be the
output from the appropriate <a href="geo_weights.html">geo_weights</a> function.</p></dd>


<dt>keep_weights</dt>
<dd><p>Whether to keep weights in the output. If set to TRUE,
the return object will have a "weights" attribute.</p></dd>


<dt>new_grid</dt>
<dd><p>A <code>geofield</code> or <code>geodomain</code> on the grid that <code>x</code> should be
regridded to. <a href="define_domain.html">define_domain</a> can be used to define a new <code>geodomain</code>.</p></dd>


<dt>new_mask</dt>
<dd><p>A <code>geofield</code> on the same grid as <code>new_grid</code> with grid points
that should not be interpolated to set to 0 or FALSE.</p></dd>


<dt>i1</dt>
<dd><p>The x index of the western side of the sub domain.</p></dd>


<dt>i2</dt>
<dd><p>The x index of the eastern side of the sub domain.</p></dd>


<dt>j1</dt>
<dd><p>The y index of the southern side of the sub domain.</p></dd>


<dt>j2</dt>
<dd><p>The y index of the northern side of the sub domain.</p></dd>


<dt>centre_lon</dt>
<dd><p>The longitude in decimal degrees of the centre of the
zoomed grid.</p></dd>


<dt>centre_lat</dt>
<dd><p>The latitude in decimal degrees of the centre of the
zoomed grid.</p></dd>


<dt>length_x</dt>
<dd><p>The number of grid squares from west to east of the zoomed
grid. If an even number is used, it will be extended by 1 since the zoomed
grid should be centred on the grid square containing
<code>(centre_lat, centre_lon)</code>.</p></dd>


<dt>length_y</dt>
<dd><p>The number of grid squares from south to north of the zoomed
grid. If an even number is used, it will be extended by 1 since the zoomed
grid should be centred on the grid square containing
<code>(centre_lat, centre_lon)</code>.</p></dd>


<dt>p1</dt>
<dd><p>The geographic location in decimal degrees of the start of the
section. Should be a vector of length 2 with the first value being the
longitude and the second value the latitude.</p></dd>


<dt>p2</dt>
<dd><p>The geographic location in decimal degrees of the end of the
section. Should be a vector of length 2 with the first value being the
longitude and the second value the latitude.</p></dd>


<dt>n</dt>
<dd><p>The number of equally spaced points along the section. The default
is 100.</p></dd>


<dt>factor</dt>
<dd><p>An integer by which to upscale the data. Can be of length 2 to
achieve different upscaling in the x and directions.</p></dd>


<dt>downsample_location</dt>
<dd><p>When "downsample" is the chosen method, each
pixel in the upscaled field is sampled from a pixel from the original field
that is inside the upscaled pixel. The location of that pixel can be one of
"bottom_left", "bottom_centre", "bottom_right", "left_centre", "centre",
"right_centre", "top_right", "top_centre", "top_left" or "random".</p></dd>


<dt>...</dt>
<dd><p>Extra options for <code>method</code>.</p></dd>


<dt>trans</dt>
<dd><p>The transformation to apply. Can be "points", "regrid",
"xsection", "subgrid", or "zoom".</p></dd>


<dt>opts</dt>
<dd><p>A list of options for the chosen transformation. The appropriate
<a href="geo_opts.html">geo_opts</a> function should be used to generate this list.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>In the case of transformations to points and cross sections, a data
frame. In all other cases an object of the same class as <code>x</code> with the
transformation applied.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    
<ul><li><p><code>geo_points</code> is used to interpolate from a regular grid to geographic
points within the domain of the grid</p></li>
<li><p><code>geo_regrid</code> is used to interpolate from one regular grid to another
regular grid. This can include reprojection from one grid projection to
another.</p></li>
<li><p><code>geo_xsection</code> extracts an equally spaced straight line of points between
to geographic locations and cen be used to construct a vertical cross section
of a 3-dimensional field. For grids that are equally space in longitude -
latitude coordinates (e.g. latlong projections) the section can be along a
great circle and thus the shortest distance between the two points.</p></li>
<li><p><code>geo_subgrid</code> extracts a sub domain of the data without changing the
coordinate reference system.</p></li>
<li><p><code>geo_zoom</code> is a special case of <code>geo_subgrid</code> whereby a sub domain of the
data is extracted centred around a geographic point.</p></li>
<li><p><code>geo_upscale</code> upscales data from a higher resolution grid to a coarser
resolution grid using an integer upscaling factor. The default method is to
take the mean of all high resolution pixels inside each coarse resolution
pixels, though sampling using the "downsample" method is faster and likely
sufficient for upscaling for raster raster plotting.</p></li>
<li><p><code>geo_transform</code> is a generalized function that can be used in functions
that take the type of geographic transformation as an argument.</p></li>
</ul><p>For transformations that require the interpolation of data (points, regrid
and xsection), the method of interpolation can be chosen. The available
interpolation methods are nearest neighbour, bilinear and bicubic. In
addition, masks can be used to prevent grid points being used in the
interpolation - for example if you have a land-sea mask, grid points with a
value of 0 or FALSE will not be used in the interpolation.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Andrew Singleton.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

